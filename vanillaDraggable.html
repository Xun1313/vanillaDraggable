<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./src/assets/all/div.css" />

    <title>Document</title>
  </head>
  <body>
    <div class="empty">
      <div class="fill one" draggable="true"></div>
    </div>
    <div class="empty"></div>
    <div class="empty">
      <div class="fill two" draggable="true"></div>
    </div>
    <div class="empty"></div>
    <div class="empty"></div>

    <script>
      let now=''
      const fill = [...document.querySelectorAll('.fill')]
      const empties = document.querySelectorAll('.empty')

      empties.forEach(e => {
        e.addEventListener('dragover', dragover)
        e.addEventListener('dragenter', dragenter)
        e.addEventListener('dragleave', dragleave)
        e.addEventListener('drop', drop)
      })

      function dragover(e) {
        //console.log(this.childNodes);
        e.preventDefault()
        //console.log('dragover')
      }
      function dragenter(e) {
        //e.preventDefault()
        e.currentTarget.classList.add('hovered')
        //console.log('dragenter')
      }
      function dragleave(e) {
        e.currentTarget.classList.remove('hovered')
        //console.log('dragleave')
      }
      function drop(e) {
        this.appendChild(fill[1])
        //console.log('drop')
      }

      fill.forEach(e => {
        e.addEventListener('dragstart', dragstart)
        e.addEventListener('dragend', dragend)
        e.addEventListener('drag', drag)
      })
      /* fill.addEventListener('dragstart', dragstart)
      fill.addEventListener('dragend', dragend) */
      function dragstart() {
        //類似mousemove時啟動
        console.log('start')
        this.classList.add('hold')
        //hold是內容的邊框有顏色

        setTimeout(() => {
          this.classList.add('invisible')
          //invisible是隱藏起來
        }, 0)
      }
      /* function drag() {
        類似mouseup時啟動
        console.log('drag')
      } */
      function dragend() {
        //類似mouseup時啟動
        console.log('end')
        this.classList.remove('invisible', 'hold')
      }
    </script>
  </body>
</html>
